{"ast":null,"code":"import axios from 'axios';\nimport { CART_ADD_ITEM } from '../Constants/Cartconstants';\nimport { REMOVE_FROM_CART } from '../Constants/Cartconstants';\nimport Cookie from 'js-cookie';\n\nconst addToCart = (productid, qty) => async (dispatch, getState) => {\n  try {\n    const {\n      data\n    } = await axios.get('http://localhost:3001/product/' + productid);\n    dispatch({\n      type: CART_ADD_ITEM,\n      payload: {\n        product: data.productid,\n        name: data.name,\n        image: data.image,\n        price: data.price,\n        countinstock: data.countinstock,\n        qty\n      }\n    });\n    /*Implementing cookies from preserving state - cart itemms on page refresh*/\n\n    /*define getstate function to use get cart state. The getstate runs once dispatch action is completed; then setting cookies follows suite*/\n\n    const {\n      cart: {\n        cartItems\n      }\n    } = getState();\n    /*seeting cookie ('name', 'value') Note that JSON.strigify coverts the state which is in object type to string type*/\n\n    Cookie.set(\"cartItems\", JSON.stringify(cartItems));\n  } catch (error) {}\n};\n\nexport { addToCart };\n\nconst removeFromCart = productid => dispatch => {\n  try {\n    dispatch({\n      type: REMOVE_FROM_CART,\n      payload: productid\n    });\n  } catch (error) {}\n};\n\nexport { removeFromCart };","map":{"version":3,"sources":["C:/Users/Administrator/Documents/GitHub/Fosy-Store/src/Actions/Cartaction.js"],"names":["axios","CART_ADD_ITEM","REMOVE_FROM_CART","Cookie","addToCart","productid","qty","dispatch","getState","data","get","type","payload","product","name","image","price","countinstock","cart","cartItems","set","JSON","stringify","error","removeFromCart"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,aAAT,QAA8B,4BAA9B;AACA,SAASC,gBAAT,QAAiC,4BAAjC;AACA,OAAOC,MAAP,MAAmB,WAAnB;;AAGA,MAAMC,SAAS,GAAG,CAACC,SAAD,EAAYC,GAAZ,KAAoB,OAAOC,QAAP,EAAiBC,QAAjB,KAA8B;AACnE,MAAI;AAEH,UAAM;AAAEC,MAAAA;AAAF,QAAW,MAAMT,KAAK,CAACU,GAAN,CAAU,mCAAmCL,SAA7C,CAAvB;AACAE,IAAAA,QAAQ,CAAC;AACRI,MAAAA,IAAI,EAAEV,aADE;AACaW,MAAAA,OAAO,EAAE;AAC7BC,QAAAA,OAAO,EAAEJ,IAAI,CAACJ,SADe;AAE7BS,QAAAA,IAAI,EAAEL,IAAI,CAACK,IAFkB;AAG7BC,QAAAA,KAAK,EAAEN,IAAI,CAACM,KAHiB;AAI7BC,QAAAA,KAAK,EAAEP,IAAI,CAACO,KAJiB;AAK7BC,QAAAA,YAAY,EAAER,IAAI,CAACQ,YALU;AAM7BX,QAAAA;AAN6B;AADtB,KAAD,CAAR;AAUD;;AACC;;AACA,UAAM;AAAEY,MAAAA,IAAI,EAAE;AAAEC,QAAAA;AAAF;AAAR,QAA0BX,QAAQ,EAAxC;AACA;;AACAL,IAAAA,MAAM,CAACiB,GAAP,CAAW,WAAX,EAAwBC,IAAI,CAACC,SAAL,CAAeH,SAAf,CAAxB;AACA,GAlBD,CAmBA,OAAOI,KAAP,EAAa,CAEZ;AAED,CAxBD;;AA0BA,SAASnB,SAAT;;AAEA,MAAMoB,cAAc,GAAInB,SAAD,IAAgBE,QAAD,IAAc;AACnD,MAAI;AACHA,IAAAA,QAAQ,CAAC;AACRI,MAAAA,IAAI,EAAET,gBADE;AAERU,MAAAA,OAAO,EAAEP;AAFD,KAAD,CAAR;AAKA,GAND,CAOA,OAAOkB,KAAP,EAAc,CAEb;AACD,CAXD;;AAaA,SAAQC,cAAR","sourcesContent":["import axios from 'axios';\r\nimport { CART_ADD_ITEM } from '../Constants/Cartconstants';\r\nimport { REMOVE_FROM_CART } from '../Constants/Cartconstants';\r\nimport Cookie from 'js-cookie';\r\n\r\n\r\nconst addToCart = (productid, qty) => async (dispatch, getState) => {\r\n\ttry {\r\n\r\n\t\tconst { data } = await axios.get('http://localhost:3001/product/' + productid);\r\n\t\tdispatch({\r\n\t\t\ttype: CART_ADD_ITEM, payload: {\r\n\t\t\t\tproduct: data.productid,\r\n\t\t\t\tname: data.name,\r\n\t\t\t\timage: data.image,\r\n\t\t\t\tprice: data.price,\r\n\t\t\t\tcountinstock: data.countinstock,\r\n\t\t\t\tqty\r\n\t\t\t}\r\n\t\t})\r\n\t/*Implementing cookies from preserving state - cart itemms on page refresh*/ \r\n\t\t/*define getstate function to use get cart state. The getstate runs once dispatch action is completed; then setting cookies follows suite*/\r\n\t\tconst { cart: { cartItems } } = getState();\r\n\t\t/*seeting cookie ('name', 'value') Note that JSON.strigify coverts the state which is in object type to string type*/\r\n\t\tCookie.set(\"cartItems\", JSON.stringify(cartItems));\r\n\t}\r\n\tcatch (error){\r\n\t\t\r\n\t}\r\n\t\r\n}\r\n\r\nexport { addToCart };\r\n\r\nconst removeFromCart = (productid) => (dispatch) => {\r\n\ttry {\r\n\t\tdispatch({\r\n\t\t\ttype: REMOVE_FROM_CART,\r\n\t\t\tpayload: productid\r\n\t\t});\r\n\t\t\r\n\t}\r\n\tcatch (error) {\r\n\r\n\t}\r\n}\r\n\r\nexport {removeFromCart}"]},"metadata":{},"sourceType":"module"}